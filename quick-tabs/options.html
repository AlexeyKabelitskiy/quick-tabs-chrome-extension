<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="assets/styles.css" type="text/css" media="all"/>
    <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
    <title>Quick Tabs Options</title>
    <script type="text/javascript">

        $(document).ready(function() {

            // load the saved options
            $('#popup_key').val(localStorage["popup_key"] || 'm');
            $('#popup_ctrl').attr('checked', localStorage["popup_ctrl"] ? localStorage["popup_ctrl"] == 'true' : true);
            $('#popup_shift').attr('checked', localStorage["popup_shift"] == 'true' || false);
            $('#popup_alt').attr('checked', localStorage["popup_alt"] == 'true' || false);
            $("#closed_tabs_size").val(chrome.extension.getBackgroundPage().getClosedTabsSize());

            $("#save_btn").click(function() {
                localStorage["popup_key"] = $('#popup_key').val();
                localStorage["popup_ctrl"] = $('#popup_ctrl').attr('checked');
                localStorage["popup_shift"] = $('#popup_shift').attr('checked');
                localStorage["popup_alt"] = $('#popup_alt').attr('checked');
                localStorage["closed_tabs_size"] = $("#closed_tabs_size").val();

                chrome.extension.getBackgroundPage().rebindShortcutKeys();
                chrome.extension.getBackgroundPage().resizeClosedTabs();
                
                // Update status to let user know options were saved.
                $(".alert").text("Options saved.")
                        .fadeTo('slow', 1)
                        .animate({opacity: 1.0}, 3000)
                        .fadeTo('slow', 0);
            });
        });

    </script>
</head>
<body id="options">

<div class="alert"><span>[blank]</span></div>

<div class="header">
    <img src="assets/icon-32.png" alt="Quick Tabs">
    <h1>Quick Tabs Options</h1>
</div>

<div class="body">
    <fieldset>
        <legend>Quick Tabs list window options</legend>
        <label>
            Closed tabs list size:
            <select id="closed_tabs_size">
                <option>0</option>
                <option>10</option>
                <option>15</option>
                <option>20</option>
                <option>25</option>
            </select>
        </label>
    </fieldset>
    <fieldset>
        <legend>Popup window shortcut<sup>*</sup></legend>
        <label>
            ctrl
            <input type="checkbox" id="popup_ctrl"/>
        </label>
        <label>
            + shift
            <input type="checkbox" id="popup_shift"/>
        </label>
        <label>
            + alt
            <input type="checkbox" id="popup_alt"/>
        </label>
        + <input type="text" id="popup_key" maxlength="3" size="3"/>
    </fieldset>
    <br/>

    <a href="#" id="save_btn" class="btn primary"><span><span>Apply changes</span></span></a>

    <br/>
    <br/>
    <div class="footnote">
        * because of limitations with the chrome extensions api keyboard shortcuts may not work on all pages and some experimentation may be required.
    </div>

</div>

</body>
</html>
